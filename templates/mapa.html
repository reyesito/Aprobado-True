
{% extends "base.html" %}

{% block body %}
        <h1>Mapa con Marcadores</h1>
        <div id="map" style="height: 500px; width: 100%;"></div>
        {% endblock %}

        {% block scripts %}
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBDaeWicvigtP9xPv919E-RNoxfvC-Hqik&callback=iniciarMap"></script>
        <script>
        function iniciarMap() {
        fetch('/guardar_marcadores')
                .then(response => response.json())
                .then(data => {
                var mapOptions = {
                        zoom: 15,
                        center: {lat: data[0].lat, lng: data[0].lng} // Centrar en el primer marcador
                };
                
                var map = new google.maps.Map(document.getElementById('map'), mapOptions);

                data.forEach(function(location) {
                        var marker = new google.maps.Marker({
                        position: {lat: location.lat, lng: location.lng},
                        map: map
                        });
                });
                });
        }

        // Inicializar el mapa cuando la p√°gina haya cargado completamente
        window.onload = iniciarMap;
        </script>
{% endblock %}
